<!DOCTYPE html><html lang="en"><head><meta charSet="utf-8"/><meta http-equiv="x-ua-compatible" content="ie=edge"/><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"/><style data-href="/component---src-templates-blog-post-js.d353a3096505d8eda03e.css">@import url(https://fonts.googleapis.com/css?family=Libre+Franklin|Questrial);html{font-family:Questrial,sans-serif;-ms-text-size-adjust:100%;-webkit-text-size-adjust:100%}body{margin:0}article,aside,details,figcaption,figure,footer,header,main,menu,nav,section,summary{display:block}audio,canvas,progress,video{display:inline-block}audio:not([controls]){display:none;height:0}progress{vertical-align:baseline}[hidden],template{display:none}a{background-color:transparent;color:#1644ce;text-decoration:none;-webkit-text-decoration-skip:objects}a:active,a:hover{outline-width:0}abbr[title]{border-bottom:none;text-decoration:underline;-webkit-text-decoration:underline dotted;text-decoration:underline dotted}b,strong{font-weight:inherit;font-weight:bolder}dfn{font-style:italic}h1{font-size:2em;margin:.67em 0}mark{background-color:#ff0;color:#000}small{font-size:80%}sub,sup{font-size:75%;line-height:0;position:relative;vertical-align:baseline}sub{bottom:-.25em}sup{top:-.5em}img{border-style:none}svg:not(:root){overflow:hidden}code,kbd,pre,samp{font-family:monospace,monospace;font-size:1em}figure{margin:1em 40px}hr{box-sizing:content-box;height:0;overflow:visible}button,input,optgroup,select,textarea{font:inherit;margin:0}optgroup{font-weight:700}button,input{overflow:visible}button,select{text-transform:none}[type=reset],[type=submit],button,html [type=button]{-webkit-appearance:button}[type=button]::-moz-focus-inner,[type=reset]::-moz-focus-inner,[type=submit]::-moz-focus-inner,button::-moz-focus-inner{border-style:none;padding:0}[type=button]:-moz-focusring,[type=reset]:-moz-focusring,[type=submit]:-moz-focusring,button:-moz-focusring{outline:1px dotted ButtonText}fieldset{border:1px solid silver;margin:0 2px;padding:.35em .625em .75em}legend{box-sizing:border-box;color:inherit;display:table;max-width:100%;padding:0;white-space:normal}textarea{overflow:auto}[type=checkbox],[type=radio]{box-sizing:border-box;padding:0}[type=number]::-webkit-inner-spin-button,[type=number]::-webkit-outer-spin-button{height:auto}[type=search]{-webkit-appearance:textfield;outline-offset:-2px}[type=search]::-webkit-search-cancel-button,[type=search]::-webkit-search-decoration{-webkit-appearance:none}::-webkit-input-placeholder{color:inherit;opacity:.54}::-webkit-file-upload-button{-webkit-appearance:button;font:inherit}html{font:112.5%/1.45em georgia,serif;box-sizing:border-box;overflow-y:scroll}*,:after,:before{box-sizing:inherit}body{color:rgba(0,0,0,.8);font-family:Questrial,georgia,serif;font-weight:400;word-wrap:break-word;-webkit-font-kerning:normal;font-kerning:normal;-ms-font-feature-settings:"kern","liga","clig","calt";-webkit-font-feature-settings:"kern","liga","clig","calt";font-feature-settings:"kern","liga","clig","calt"}img{margin:0;padding:0}h1{margin:0 0 1.45rem;font-weight:700;font-size:2.25rem;line-height:1.1}h1,h2{padding:0;color:inherit;font-family:Questrial,-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Oxygen,Ubuntu,Cantarell,Fira Sans,Droid Sans,Helvetica Neue,sans-serif;text-rendering:optimizeLegibility}h2{font-size:28px;letter-spacing:.05rem;margin:0 0 30px}h3{font-size:1.38316rem}h3,h4{padding:0;margin:0 0 1.45rem;color:inherit;font-family:Questrial,-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Oxygen,Ubuntu,Cantarell,Fira Sans,Droid Sans,Helvetica Neue,sans-serif;font-weight:700;text-rendering:optimizeLegibility;line-height:1.1}h4{font-size:1rem}h5{font-size:.85028rem}h5,h6{padding:0;margin:0 0 1.45rem;color:inherit;font-family:Questrial,-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Oxygen,Ubuntu,Cantarell,Fira Sans,Droid Sans,Helvetica Neue,sans-serif;font-weight:700;text-rendering:optimizeLegibility;line-height:1.1}h6{font-size:.78405rem}hgroup{padding:0;margin:0 0 1.45rem}ul{margin-right:0;margin-top:0;margin-bottom:1.45rem}ol,ul{padding:0;list-style-position:outside;list-style-image:none}ol{margin:0 0 1.45rem 1.45rem}dd,dl{margin:0 0 1.45rem}dd,dl,p{padding:0}p{margin-left:0;margin-right:0;color:#a3a3a3;margin-top:30px;font-size:15px}figure{padding:0}figure,pre{margin:0 0 1.45rem}pre{font-size:.85rem;line-height:1.42;background:rgba(0,0,0,.04);border-radius:3px;overflow:auto;word-wrap:normal;padding:1.45rem}table{font-size:1rem;line-height:1.45rem;border-collapse:collapse;width:100%}fieldset,table{padding:0;margin:0 0 1.45rem}blockquote{padding:0;margin:0 1.45rem 1.45rem}form,iframe,noscript{padding:0;margin:0 0 1.45rem}hr,iframe{border:none}hr{padding:0;margin:0 0 calc(1.45rem - 1px);background:rgba(0,0,0,.2);height:1px}address{padding:0;margin:0 0 1.45rem}b,dt,strong,th{font-weight:700}li{color:#a3a3a3;margin-bottom:.725rem}ol li,ul li{padding-left:0}li>ol,li>ul{margin-left:1.45rem;margin-bottom:.725rem;margin-top:.725rem}blockquote :last-child,li :last-child,p :last-child{margin-bottom:0}li>p{margin-bottom:.725rem}code,kbd,samp{font-size:.85rem;line-height:1.45rem}abbr,abbr[title],acronym{border-bottom:1px dotted rgba(0,0,0,.5);cursor:help}abbr[title]{text-decoration:none}td,th,thead{text-align:left}td,th{border-bottom:1px solid rgba(0,0,0,.12);font-feature-settings:"tnum";-moz-font-feature-settings:"tnum";-ms-font-feature-settings:"tnum";-webkit-font-feature-settings:"tnum";padding:.725rem .96667rem calc(.725rem - 1px)}td:first-child,th:first-child{padding-left:0}td:last-child,th:last-child{padding-right:0}code,tt{background-color:rgba(0,0,0,.04);border-radius:3px;font-family:SFMono-Regular,Consolas,Roboto Mono,Droid Sans Mono,Liberation Mono,Menlo,Courier,monospace;padding:.2em 0}pre code{background:none;line-height:1.42}code:after,code:before,tt:after,tt:before{letter-spacing:-.2em;content:" "}pre code:after,pre code:before,pre tt:after,pre tt:before{content:""}@media only screen and (max-width:480px){html{font-size:100%}}img+em{display:block;text-align:center}</style><meta name="generator" content="Gatsby 2.0.28"/><style data-styled-components="jxDjQw eRhchY idJfWh">
/* sc-component-id: Header__Name-sc-1yg5ab7-0 */
.jxDjQw{font-size:14px;font-weight:700;}
/* sc-component-id: blog-post__BlogTitle-sc-1g2ojw6-0 */
.eRhchY{color:#394047;font-family:'Questrial';font-size:36px;line-height:44px;margin-bottom:1.45rem;}
/* sc-component-id: blog-post__BlogContent-sc-1g2ojw6-1 */
.idJfWh{color:#a3a3a3;line-height:20px;font-size:15px;font-family:'Questrial';} .idJfWh img{border-radius:4px;display:block;margin:10px auto;max-width:734px;width:100%;}</style><title data-react-helmet="true">Jon Sadka - Type coercion in D3.js</title><meta data-react-helmet="true" name="description" content="Jon Sadka&#x27;s Personal Website and Blog"/><meta data-react-helmet="true" name="keywords" content="personal website, blog, sadka, jon, jon sadka, visualization, front end, software engineer, portfolio, visualization, D3.js, JavaScript"/><meta data-react-helmet="true" name="theme-color" content="#333333"/><meta data-react-helmet="true" name="google-site-verification" content="aGnf4yqfnIPW-BYUolkaPSjtVzXYAsQKR3pZAuxH7-E"/><script>
  
  
  if(true) {
    (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
    (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
    m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
    })(window,document,'script','https://www.google-analytics.com/analytics.js','ga');
  }
  if (typeof ga === "function") {
    ga('create', 'UA-53344458-1', 'auto', {});
      
      }
      </script><link rel="manifest" href="/manifest.webmanifest"/><meta name="theme-color" content="#333333"/><link rel="sitemap" type="application/xml" href="/sitemap.xml"/><link as="script" rel="preload" href="/component---src-templates-blog-post-js-4785ca9b037cd8145e13.js"/><link as="script" rel="preload" href="/0-f01ddaf1fdf10dc81c90.js"/><link as="script" rel="preload" href="/app-a383500957aa8d29ea7d.js"/><link as="script" rel="preload" href="/webpack-runtime-a0ea0b04253dad2b3fe6.js"/><link rel="preload" href="/static/d/95/path---blog-type-coercion-in-d-3-js-c-7-b-e6f-xr7bukW1m2oBXlGPeSNButofs.json" as="fetch" crossOrigin="use-credentials"/></head><body><div id="___gatsby"><div style="outline:none" tabindex="-1" role="group"><div><div style="margin-bottom:1.45rem"><div style="margin:0 auto;max-width:960px;padding:1.45rem 1.0875rem"><div class="Header__Name-sc-1yg5ab7-0 jxDjQw" style="margin:0"><a style="color:black;font-family:Libre Franklin;text-decoration:none" href="/">Jon Sadka.</a></div></div></div><div style="margin:0 auto;max-width:960px;padding:0px 1.0875rem 1.45rem;padding-top:0"><div class="blog-post-container"><div class="blog-post"><div class="blog-post__BlogTitle-sc-1g2ojw6-0 eRhchY">Type coercion in D3.js</div><div class="blog-post-content blog-post__BlogContent-sc-1g2ojw6-1 idJfWh"><p>D3.js is an amazing platform that allows software engineers to bind data to each DOM element that exists, or will be, created.  This data can then be used to compile graphs, charts, or any other visual means. Last week, I had the opportunity to play around with D3.js and created a simple little game <a href="http://jonsadka.github.io/watchout">(click to play watchout!)</a>.  During that time, I discovered that D3.js does this funny thing with type coercion; when you try to add two numbers obtained from element attributes, it returns a string.</p>
<p>Let’s look at the following example.  Suppose we wanted to create a game and add two objects, an enemy object and a player object.  And suppose we wanted the game to end when the enemy collides with the player.  One way to do this is to calculate the distance between the two objects; if the distance between the two is less than 1/2 their width (or the radius in the instance of a circle), then the two objects have collided.</p>
<h3>Collision example</h3>
<p>Below, let’s create the player and the red-colored enemy:</p>
<pre><code class="language-javascript">d3.select('body').selectAll('player')
  .data([[]]).enter().append('circle')
  .attr("class", "player")
  .attr('cx', 200 ).attr('cy', 200 )
  .attr('r', 10)
</code></pre>
<pre><code class="language-javascript">d3.select('body').selectAll('enemy')
  .data( [[]] ).enter().append('circle')
  .attr("class", "enemy")
  .attr('cx', 100).attr('cy', 100)
  .attr('r', 15 )
  .attr('fill','red')
</code></pre>
<p>Now that the players are created, we know that the distance between the two can be achieved using the <a href="http://en.wikipedia.org/wiki/Pythagorean_theorem">Pythagorean Theorem</a> ( length = sqrt(  Δx^2 +  Δy^2  ) ).  Now this length, must be less than the addition of their two radii’s for there to be a collision.  We can get the radii of the enemy and the player as follows:</p>
<pre><code class="language-javascript">const playerSize = d3.select('.player').attr('r');
const enemySize = d3.select('.enemy').attr('r');
const collideDistance = playerSize + enemySize;
</code></pre>
<p>But wait! What happened to our collide distance variable and why is it 1015?  Turns out, D3.js treats <code>playerSize</code> and <code>enemySize</code> as strings and adds them instead of adding two numbers. We can correct this and get <code>collideDistance</code> to be 25 (i.e. 10 + 15) by forcing type coercion by adding a plus sign in front of each variable to declare them as numbers.</p>
<pre><code class="language-javascript">const collideDistance = +playerSize + +enemySize;
</code></pre>
<p>As an aside, the above is similar to below, but is more concise.</p>
<pre><code class="language-javascript">const collideDistance = Number(playerSize) + Number(enemySize);
</code></pre>
<p>D3.js is a powerful resource in manipulating data and provides developers with a tremendous amount of flexibility.  There are a lot of helpful resources on the web and the creator, Mike Bostock, has done a fantastic job of compiling and documenting a lot of examples.  Creating the game was fairly straightforward and it’s quite easy to pickup. I encourage all of you to try out D3.js.</p></div></div></div></div></div></div></div><script id="gatsby-script-loader">/*<![CDATA[*/window.page={"componentChunkName":"component---src-templates-blog-post-js","jsonName":"blog-type-coercion-in-d-3-js-c7b","path":"/blog/type-coercion-in-d3js"};window.dataPath="95/path---blog-type-coercion-in-d-3-js-c-7-b-e6f-xr7bukW1m2oBXlGPeSNButofs";/*]]>*/</script><script id="gatsby-chunk-mapping">/*<![CDATA[*/window.___chunkMapping={"app":["/app-a383500957aa8d29ea7d.js"],"component---src-templates-blog-post-js":["/component---src-templates-blog-post-js.d353a3096505d8eda03e.css","/component---src-templates-blog-post-js-4785ca9b037cd8145e13.js"],"component---src-templates-tags-js":["/component---src-templates-tags-js.d353a3096505d8eda03e.css","/component---src-templates-tags-js-ccf74ce1754fa426855a.js"],"component---src-pages-404-js":["/component---src-pages-404-js.d353a3096505d8eda03e.css","/component---src-pages-404-js-ef5c627b40f47ab2cfc7.js"],"component---src-pages-tags-js":["/component---src-pages-tags-js-1508b45a6a724b3934f8.js"],"component---src-pages-index-js":["/component---src-pages-index-js-9eec0960e23c922b7db7.js"]};/*]]>*/</script><script src="/webpack-runtime-a0ea0b04253dad2b3fe6.js" async=""></script><script src="/app-a383500957aa8d29ea7d.js" async=""></script><script src="/0-f01ddaf1fdf10dc81c90.js" async=""></script><script src="/component---src-templates-blog-post-js-4785ca9b037cd8145e13.js" async=""></script></body></html>